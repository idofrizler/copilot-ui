@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables for theming */
:root {
  /* Backgrounds */
  --copilot-bg: rgba(30, 30, 30, 0.85);
  --copilot-surface: rgba(45, 45, 45, 0.9);
  --copilot-surface-hover: rgba(55, 55, 55, 0.9);

  /* Borders */
  --copilot-border: rgba(70, 70, 70, 0.5);
  --copilot-border-hover: rgba(90, 90, 90, 0.6);

  /* Accent colors */
  --copilot-accent: #58a6ff;
  --copilot-accent-hover: #79b8ff;
  --copilot-accent-muted: rgba(88, 166, 255, 0.25);

  /* Text colors */
  --copilot-text: #e6edf3;
  --copilot-text-muted: #8b949e;
  --copilot-text-inverse: #1e1e1e;

  /* Status colors */
  --copilot-success: #3fb950;
  --copilot-success-muted: rgba(63, 185, 80, 0.4);
  --copilot-warning: #d29922;
  --copilot-warning-muted: rgba(210, 153, 34, 0.4);
  --copilot-error: #f85149;
  --copilot-error-muted: rgba(248, 81, 73, 0.4);

  /* Scrollbar */
  --copilot-scrollbar-thumb: rgba(139, 148, 158, 0.3);
  --copilot-scrollbar-thumb-hover: rgba(139, 148, 158, 0.5);

  /* Selection */
  --copilot-selection: rgba(88, 166, 255, 0.3);

  /* Shadows */
  --copilot-shadow: rgba(0, 0, 0, 0.2);
  --copilot-shadow-strong: rgba(0, 0, 0, 0.4);

  /* Terminal */
  --copilot-terminal-bg: transparent;
  --copilot-terminal-text: #e6edf3;
  --copilot-terminal-cursor: #58a6ff;
}

/* Theme transition for smooth switching */
html,
html *,
html *::before,
html *::after {
  transition:
    background-color 150ms ease,
    border-color 150ms ease,
    color 150ms ease,
    box-shadow 150ms ease,
    fill 150ms ease,
    stroke 150ms ease;
}

/* Disable transitions on page load */
html.no-transitions,
html.no-transitions *,
html.no-transitions *::before,
html.no-transitions *::after {
  transition: none !important;
}

/* Base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body,
#root {
  height: 100%;
  width: 100%;
  overflow: hidden;
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell',
    sans-serif;
  background: transparent;
  color: var(--copilot-text);
}

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--copilot-scrollbar-thumb);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--copilot-scrollbar-thumb-hover);
}

/* Window drag region */
.drag-region {
  -webkit-app-region: drag;
}

.no-drag {
  -webkit-app-region: no-drag;
}

/* Terminal container styles */
.terminal-container {
  padding: 16px 20px;
}

.terminal-container .xterm {
  height: 100%;
}

.terminal-container .xterm-viewport {
  background: transparent !important;
  overflow-y: auto !important;
}

.terminal-container .xterm-screen {
  background: transparent !important;
}

/* Terminal selection */
.xterm .xterm-selection div {
  background: var(--copilot-selection) !important;
}

/* Terminal cursor */
.terminal-container .xterm-cursor-layer {
  z-index: 10;
}

/* Focus ring for terminal */
.terminal-container:focus-within {
  outline: none;
}

/* Smooth animations */
button {
  transition: all 0.15s ease;
}

button:active {
  transform: scale(0.97);
}

/* Keyboard hints */
kbd {
  font-family: 'JetBrains Mono', 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace;
}

/* Status glow animation */
@keyframes status-glow {
  0%,
  100% {
    box-shadow: 0 0 4px var(--copilot-success-muted);
  }
  50% {
    box-shadow: 0 0 12px var(--copilot-success);
  }
}

.status-glow {
  animation: status-glow 2s ease-in-out infinite;
}

/* Selection styles */
::selection {
  background: var(--copilot-selection);
  color: inherit;
}

/* Prevent text selection on UI elements */
.drag-region,
button,
.no-select {
  user-select: none;
}

/* Terminal text selection should work */
.terminal-container {
  user-select: text;
}

/* Window shadow when focused */
#root > div {
  box-shadow:
    0 0 0 1px var(--copilot-border),
    0 8px 32px var(--copilot-shadow-strong),
    0 2px 8px var(--copilot-shadow);
}

/* Subtle inner glow for depth */
#root > div::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* Font loading */
@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('JetBrains Mono Regular'), local('JetBrainsMono-Regular');
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('JetBrains Mono SemiBold'), local('JetBrainsMono-SemiBold');
}

/* ASCII Diagram Styling
 * Optimized for proper display of box-drawing characters and ASCII art.
 * Uses a monospace font stack with good Unicode box-drawing support
 * and tight line-height for proper vertical alignment.
 */
.ascii-diagram {
  /* Font stack prioritizing fonts with good box-drawing character support */
  font-family:
    'SF Mono', 'Menlo', 'Monaco', 'Cascadia Code', 'Consolas', 'DejaVu Sans Mono',
    'Liberation Mono', monospace !important;

  /* Tight line-height ensures vertical lines (│) align across rows */
  line-height: 1.2 !important;

  /* Zero letter-spacing prevents gaps in horizontal lines (─) */
  letter-spacing: 0 !important;

  /* Preserve exact whitespace for proper alignment */
  white-space: pre !important;

  /* Prevent any text rendering optimizations that might affect alignment */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Ensure consistent sizing */
  font-size: inherit;

  /* Prevent word wrapping which would break diagrams */
  word-wrap: normal;
  overflow-wrap: normal;
}
